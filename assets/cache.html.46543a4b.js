import{_ as n,o as s,c as a,d as t}from"./app.5ae1f617.js";const e={},p=t(`<h1 id="\u7F13\u5B58" tabindex="-1"><a class="header-anchor" href="#\u7F13\u5B58" aria-hidden="true">#</a> \u7F13\u5B58</h1><p>\u7F13\u5B58\u5DE5\u5177\u5E93\u662F\u5BF9\u6D4F\u89C8\u5668 api: sessionStorage, localStorage \u7684\u5C01\u88C5, \u4F7F\u5176\u66F4\u52A0\u6613\u7528\u7B80\u5355.</p><h2 id="\u5FEB\u901F\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u5FEB\u901F\u4F7F\u7528" aria-hidden="true">#</a> \u5FEB\u901F\u4F7F\u7528</h2><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> WebCache<span class="token punctuation">,</span> cacheKey <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;fe-dk&#39;</span>

<span class="token keyword">const</span> session <span class="token operator">=</span> WebCache<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;session&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> local <span class="token operator">=</span> WebCache<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;local&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// \u8BBE\u7F6E\u4E00\u4E2A\u952E\u503C\u5BF9</span>
local<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;theme&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;dark&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// \u5C3D\u7BA1\u4F60\u53EF\u4EE5\u76F4\u63A5\u8BBE\u7F6E\u4E00\u4E2A\u5B57\u7B26\u4E32\u5B57\u9762\u91CF\u4F5C\u4E3A\u952E\u503C, \u4F46\u662F\u4ECD\u7136\u63A8\u8350\u4F60\u4F7F\u7528\u53EF\u5BFC\u51FA\u7684 cacheKey \u65B9\u6CD5\u6765\u751F\u6210\u4E00\u4E2A\u952E, \u7136\u540E\u4F60\u5C31\u53EF\u4EE5\u83B7\u53D6TS\u7684\u7C7B\u578B\u63D0\u793A\u4E86</span>
<span class="token comment">// \u83B7\u53D6\u5BF9\u952E\u7684\u7C7B\u578B\u63D0\u793A</span>
<span class="token keyword">let</span> <span class="token constant">USER_INFO</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">cacheKey</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  email<span class="token operator">:</span> <span class="token builtin">string</span>
  phone<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;USER_INFO&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// \u9519\u8BEF\u7684\u5199\u6CD5</span>
<span class="token comment">// \u5982\u679C\u4F60\u4F7F\u7528TS, \u4E0B\u9762\u7684\u5199\u6CD5 \u5C06\u4F1A\u62A5\u7C7B\u578B\u9519\u8BEF</span>
session<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token constant">USER_INFO</span><span class="token punctuation">,</span> <span class="token string">&#39;info&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// \u6B63\u786E\u7684\u5199\u6CD5</span>
session<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token constant">USER_INFO</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;\u5F20\u4E09&#39;</span><span class="token punctuation">,</span>
  email<span class="token operator">:</span> <span class="token string">&#39;email@some.com&#39;</span><span class="token punctuation">,</span>
  phone<span class="token operator">:</span> <span class="token string">&#39;18866669999&#39;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">100</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u8BBE\u7F6E\u8FC7\u671F\u65F6\u95F4" tabindex="-1"><a class="header-anchor" href="#\u8BBE\u7F6E\u8FC7\u671F\u65F6\u95F4" aria-hidden="true">#</a> \u8BBE\u7F6E\u8FC7\u671F\u65F6\u95F4</h2><p>\u4E1A\u52A1\u4E2D\u901A\u5E38\u4F1A\u6709\u4F7F\u7528 token \u8FDB\u884C\u6388\u6743\u7684\u65B9\u5F0F, \u8FD9\u65F6\u5019 token \u9700\u8981\u4FDD\u5B58\u5230\u524D\u7AEF, \u4EE5\u524D\u7684\u505A\u6CD5\u662F\u5728\u6D4F\u89C8\u5668 cookie \u4E2D\u4FDD\u5B58\u8FD9\u4E9B\u53C2\u6570, \u4F46\u662F cookie \u6709\u4E00\u4E2A\u6700\u5927\u7684\u7F3A\u70B9, \u90A3\u5C31\u662F\u5B58\u50A8\u957F\u5EA6\u9650\u5236, \u4F46 cookie \u4E5F\u6709\u5176\u6709\u70B9, \u90A3\u5C31\u662F\u53EF\u4EE5\u901A\u8FC7\u8FC7\u671F\u65F6\u95F4\u6765\u6D88\u9664 cookie. \u56E0\u6B64\u5728 storage \u7F13\u5B58\u4E2D\u5F15\u5165\u4E86\u8FC7\u671F\u65F6\u95F4\u7684\u53C2\u6570.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u8FD9\u91CC\u76843600\u662F\u4EE5\u79D2\u4E3A\u5355\u4F4D, \u8868\u793A3600\u79D2\u4E4B\u540E\u8FD9\u6761\u6570\u636E\u8FC7\u671F</span>
local<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token constant">TOKEN</span><span class="token punctuation">,</span> <span class="token string">&#39;my token&#39;</span><span class="token punctuation">,</span> <span class="token number">3600</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u6279\u91CF\u83B7\u53D6" tabindex="-1"><a class="header-anchor" href="#\u6279\u91CF\u83B7\u53D6" aria-hidden="true">#</a> \u6279\u91CF\u83B7\u53D6</h2><p>\u5F53\u6709\u9700\u8981\u662F\u53EF\u4EE5\u901A\u8FC7\u6279\u91CF\u64CD\u4F5C\u4F7F\u4EE3\u7801\u770B\u8D77\u6765\u66F4\u52A0\u7B80\u6D01</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>session<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">TOKEN</span><span class="token punctuation">,</span> <span class="token constant">USER_INFO</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u83B7\u53D6\u65F6\u7ED9\u4E00\u4E2A\u9ED8\u8BA4\u503C" tabindex="-1"><a class="header-anchor" href="#\u83B7\u53D6\u65F6\u7ED9\u4E00\u4E2A\u9ED8\u8BA4\u503C" aria-hidden="true">#</a> \u83B7\u53D6\u65F6\u7ED9\u4E00\u4E2A\u9ED8\u8BA4\u503C</h2><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>session<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token constant">TOKEN</span><span class="token punctuation">,</span> <span class="token string">&#39;default token&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u79FB\u9664" tabindex="-1"><a class="header-anchor" href="#\u79FB\u9664" aria-hidden="true">#</a> \u79FB\u9664</h2><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u79FB\u9664\u5355\u4E2A</span>
session<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token constant">TOKEN</span><span class="token punctuation">)</span>

<span class="token comment">// \u79FB\u9664\u591A\u4E2A</span>
session<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">TOKEN</span><span class="token punctuation">,</span> <span class="token constant">USER_INFO</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// \u6E05\u7A7A</span>
session<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u6DFB\u52A0\u4E8B\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u4E8B\u4EF6" aria-hidden="true">#</a> \u6DFB\u52A0\u4E8B\u4EF6</h2><p>\u6709\u65F6\u5019\u4F60\u53EF\u80FD\u9700\u8981\u5728\u8BBE\u7F6E\u7F13\u5B58\u7684\u65F6\u5019\u6267\u884C\u4E00\u4E9B\u64CD\u4F5C, \u53EF\u4EE5\u4F7F\u7528 on \u65B9\u6CD5\u6765\u6DFB\u52A0\u4E8B\u4EF6</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// \u6DFB\u52A0\u4E00\u4E2A\u53EB\u505Alog\u7684\u4E8B\u4EF6</span>
session<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;log&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> temp<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">\u8BBE\u7F6E\u4E86</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\u4E3A</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// \u79FB\u9664\u4E8B\u4EF6</span>
session<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#39;log&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17),c=[p];function o(i,l){return s(),a("div",null,c)}var r=n(e,[["render",o],["__file","cache.html.vue"]]);export{r as default};
